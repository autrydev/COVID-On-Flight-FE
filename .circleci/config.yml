version: 2.1
jobs:
  build:
    docker:
      - image: 'cimg/node:14.14.0'
        auth:
          username: tardis1103@gmail.com
          password: M8b8rak6
    steps:
      - checkout
      - run: node --version
      - run: npm install
      - run: npm install @vue/cli-service-global
      - run: npm run build
      - run: npm install surge
      - run: ./node_modules/surge/lib/cli.js ./dist --domain naughty-attraction.surge.sh
workflows:
  build_and_deploy:
    jobs:
      - build:
          filters:
            branches:
              only:
                - main